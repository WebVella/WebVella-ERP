const e=window.WvPbManager.h;import{a as t,b as n,c as o,d as a,e as r,f as i,g as s,h as d,i as l,j as c,k as u,l as p,m as f,n as h,o as m,p as v,q as g,r as y,s as b,t as w,u as N,v as I,w as C,x as S,y as E,z as x,A as T,B as L,C as M,D as k}from"./chunk-3437f53a.js";var A=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}};function _(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var O=Object.prototype.toString;function P(e){return"[object Array]"===O.call(e)}function R(e){return null!==e&&"object"==typeof e}function H(e){return"[object Function]"===O.call(e)}function j(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),P(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var B={isArray:P,isArrayBuffer:function(e){return"[object ArrayBuffer]"===O.call(e)},isBuffer:function(e){return null!=e&&(_(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&_(e.slice(0,0))}(e)||!!e._isBuffer)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:R,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===O.call(e)},isFile:function(e){return"[object File]"===O.call(e)},isBlob:function(e){return"[object Blob]"===O.call(e)},isFunction:H,isStream:function(e){return R(e)&&H(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:j,merge:function e(){var t={};function n(n,o){t[o]="object"==typeof t[o]&&"object"==typeof n?e(t[o],n):n}for(var o=0,a=arguments.length;o<a;o++)j(arguments[o],n);return t},extend:function(e,t,n){return j(t,function(t,o){e[o]=n&&"function"==typeof t?A(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}},D="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function U(){throw new Error("setTimeout has not been defined")}function V(){throw new Error("clearTimeout has not been defined")}var F=U,W=V;function q(e){if(F===setTimeout)return setTimeout(e,0);if((F===U||!F)&&setTimeout)return F=setTimeout,setTimeout(e,0);try{return F(e,0)}catch(t){try{return F.call(null,e,0)}catch(t){return F.call(this,e,0)}}}"function"==typeof D.setTimeout&&(F=setTimeout),"function"==typeof D.clearTimeout&&(W=clearTimeout);var G,X=[],J=!1,Y=-1;function z(){J&&G&&(J=!1,G.length?X=G.concat(X):Y=-1,X.length&&K())}function K(){if(!J){var e=q(z);J=!0;for(var t=X.length;t;){for(G=X,X=[];++Y<t;)G&&G[Y].run();Y=-1,t=X.length}G=null,J=!1,function(e){if(W===clearTimeout)return clearTimeout(e);if((W===V||!W)&&clearTimeout)return W=clearTimeout,clearTimeout(e);try{W(e)}catch(t){try{return W.call(null,e)}catch(t){return W.call(this,e)}}}(e)}}function $(e,t){this.fun=e,this.array=t}function Q(){}$.prototype.run=function(){this.fun.apply(null,this.array)};var Z=Q,ee=Q,te=Q,ne=Q,oe=Q,ae=Q,re=Q,ie=D.performance||{},se=ie.now||ie.mozNow||ie.msNow||ie.oNow||ie.webkitNow||function(){return(new Date).getTime()},de=new Date,le={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];X.push(new $(e,t)),1!==X.length||J||q(K)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Z,addListener:ee,once:te,off:ne,removeListener:oe,removeAllListeners:ae,emit:re,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*se.call(ie),n=Math.floor(t),o=Math.floor(t%1*1e9);return e&&(n-=e[0],(o-=e[1])<0&&(n--,o+=1e9)),[n,o]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-de)/1e3}},ce=function(e,t,n,o,a){return function(e,t,n,o,a){return e.config=t,n&&(e.code=n),e.request=o,e.response=a,e}(new Error(e),t,n,o,a)};function ue(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var pe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],fe=B.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=B.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function he(){this.message="String contains an invalid character"}(he.prototype=new Error).code=5,he.prototype.name="InvalidCharacterError";var me=B.isStandardBrowserEnv()?{write:function(e,t,n,o,a,r){var i=[];i.push(e+"="+encodeURIComponent(t)),B.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),B.isString(o)&&i.push("path="+o),B.isString(a)&&i.push("domain="+a),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ve="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||function(e){for(var t,n,o=String(e),a="",r=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.charAt(0|r)||(i="=",r%1);a+=i.charAt(63&t>>8-r%1*8)){if((n=o.charCodeAt(r+=.75))>255)throw new he;t=t<<8|n}return a},ge=function(e){return new Promise(function(t,n){var o=e.data,a=e.headers;B.isFormData(o)&&delete a["Content-Type"];var r=new XMLHttpRequest,i="onreadystatechange",s=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in r||fe(e.url)||(r=new window.XDomainRequest,i="onload",s=!0,r.onprogress=function(){},r.ontimeout=function(){}),e.auth&&(a.Authorization="Basic "+ve((e.auth.username||"")+":"+(e.auth.password||""))),r.open(e.method.toUpperCase(),function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(B.isURLSearchParams(t))o=t.toString();else{var a=[];B.forEach(t,function(e,t){null!=e&&(B.isArray(e)?t+="[]":e=[e],B.forEach(e,function(e){B.isDate(e)?e=e.toISOString():B.isObject(e)&&(e=JSON.stringify(e)),a.push(ue(t)+"="+ue(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}(e.url,e.params,e.paramsSerializer),!0),r.timeout=e.timeout,r[i]=function(){if(r&&(4===r.readyState||s)&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))){var o,a,i,d,l,c="getAllResponseHeaders"in r?(o=r.getAllResponseHeaders(),l={},o?(B.forEach(o.split("\n"),function(e){if(d=e.indexOf(":"),a=B.trim(e.substr(0,d)).toLowerCase(),i=B.trim(e.substr(d+1)),a){if(l[a]&&pe.indexOf(a)>=0)return;l[a]="set-cookie"===a?(l[a]?l[a]:[]).concat([i]):l[a]?l[a]+", "+i:i}}),l):l):null;!function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(ce("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}(t,n,{data:e.responseType&&"text"!==e.responseType?r.response:r.responseText,status:1223===r.status?204:r.status,statusText:1223===r.status?"No Content":r.statusText,headers:c,config:e,request:r}),r=null}},r.onerror=function(){n(ce("Network Error",e,null,r)),r=null},r.ontimeout=function(){n(ce("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",r)),r=null},B.isStandardBrowserEnv()){var d=me,l=(e.withCredentials||fe(e.url))&&e.xsrfCookieName?d.read(e.xsrfCookieName):void 0;l&&(a[e.xsrfHeaderName]=l)}if("setRequestHeader"in r&&B.forEach(a,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete a[t]:r.setRequestHeader(t,e)}),e.withCredentials&&(r.withCredentials=!0),e.responseType)try{r.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&r.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){r&&(r.abort(),n(e),r=null)}),void 0===o&&(o=null),r.send(o)})},ye={"Content-Type":"application/x-www-form-urlencoded"};function be(e,t){!B.isUndefined(e)&&B.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var we,Ne={adapter:("undefined"!=typeof XMLHttpRequest?we=ge:void 0!==le&&(we=ge),we),transformRequest:[function(e,t){return function(e,t){B.forEach(e,function(t,n){"Content-Type"!==n&&n.toUpperCase()==="Content-Type".toUpperCase()&&(e["Content-Type"]=t,delete e[n])})}(t),B.isFormData(e)||B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e)?e:B.isArrayBufferView(e)?e.buffer:B.isURLSearchParams(e)?(be(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):B.isObject(e)?(be(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};B.forEach(["delete","get","head"],function(e){Ne.headers[e]={}}),B.forEach(["post","put","patch"],function(e){Ne.headers[e]=B.merge(ye)});var Ie=Ne;function Ce(){this.handlers=[]}Ce.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Ce.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Ce.prototype.forEach=function(e){B.forEach(this.handlers,function(t){null!==t&&e(t)})};var Se=Ce,Ee=function(e,t,n){return B.forEach(n,function(n){e=n(e,t)}),e},xe=function(e){return!(!e||!e.__CANCEL__)};function Te(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Le=function(e){var t,n;return Te(e),e.baseURL&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e.url)&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=Ee(e.data,e.headers,e.transformRequest),e.headers=B.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),B.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||Ie.adapter)(e).then(function(t){return Te(e),t.data=Ee(t.data,t.headers,e.transformResponse),t},function(t){return xe(t)||(Te(e),t&&t.response&&(t.response.data=Ee(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})};function Me(e){this.defaults=e,this.interceptors={request:new Se,response:new Se}}Me.prototype.request=function(e){"string"==typeof e&&(e=B.merge({url:arguments[0]},arguments[1])),(e=B.merge(Ie,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[Le,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},B.forEach(["delete","get","head","options"],function(e){Me.prototype[e]=function(t,n){return this.request(B.merge(n||{},{method:e,url:t}))}}),B.forEach(["post","put","patch"],function(e){Me.prototype[e]=function(t,n,o){return this.request(B.merge(o||{},{method:e,url:t,data:n}))}});var ke=Me;function Ae(e){this.message=e}Ae.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Ae.prototype.__CANCEL__=!0;var _e=Ae;function Oe(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new _e(e),t(n.reason))})}Oe.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Oe.source=function(){var e;return{token:new Oe(function(t){e=t}),cancel:e}};var Pe=Oe;function Re(e){var t=new ke(e),n=A(ke.prototype.request,t);return B.extend(n,ke.prototype,t),B.extend(n,t),n}var He=Re(Ie);He.Axios=ke,He.create=function(e){return Re(B.merge(Ie,e))},He.Cancel=_e,He.CancelToken=Pe,He.isCancel=xe,He.all=function(e){return Promise.all(e)},He.spread=function(e){return function(t){return e.apply(null,t)}};var je=He;je.default=He;var Be=je;class De{constructor(){this.node=null,this.component_name=null,this.original_event=null}}function Ue(e,t){let n=e.store.getState().createdNode;n.component_name=t.name,n.options=JSON.stringify(n.options);let o=e.store.getState().siteRootUrl+"/api/v3.0/page/"+n.page_id+"/node/create",a=e.store.getState().recordId;a&&(o+="?recId="+a),Be.post(o,n,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(t){e.addNode(t.data),window.setTimeout(function(){e.addReloadNodeIds(t.data.id);var o=new Event("WvPbManager_Node_Added"),a=new De;a.original_event=event,a.node=n,a.component_name=n.component_name,o.payload=a,document.dispatchEvent(o)},10)}).catch(function(e){e.response?e.response.data?alert(e.response.data):alert(e.response.statusText):e.message?alert(e.message):alert(e)})}function Ve(e){let t=e.store.getState().library,n=[];switch((n=e.filterString?a.filter(t,function(t){let n=t.label.toLowerCase().includes(e.filterString.toLowerCase());return n||(n=t.library.toLowerCase().includes(e.filterString.toLowerCase())),n||(n=t.description.toLowerCase().includes(e.filterString.toLowerCase())),n}):t)||(n=[]),e.sort){case"usage":n=a.orderBy(n,["usage_counter"],["desc"]);break;case"alpha":n=a.orderBy(n,["label"],["asc"]);break;default:n=a.orderBy(n,["last_used_on"],["desc"])}let o=(e.page-1)*e.pageSize,r=o+e.pageSize,i=n.length;r>i&&(r=i),e.total=i,e.pageCount=e.total/e.pageSize,e.componentList=a.slice(n,o,r)}class Fe{constructor(){this.isCreateModalVisible=!1,this.page=1,this.pageSize=24,this.sort="recent",this.componentList=new Array,this.total=0,this.pageCount=0,this.focused=!1}componentWillLoad(){this.store.mapStateToProps(this,e=>({isCreateModalVisible:e.isCreateModalVisible})),this.store.mapDispatchToProps(this,{setNodeCreation:t,addNode:n,addReloadNodeIds:o}),document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null;let e=document.getElementById("wv-pb-backdrop");e&&e.parentNode.removeChild(e),Ve(this)}cancelNodeCreateHandler(e){e.preventDefault(),e.stopPropagation(),this.filterString="",Ve(this),this.setNodeCreation(null)}filterChangeHandler(e){e.preventDefault(),e.stopPropagation(),this.filterString=e.target.value,this.page=1,Ve(this)}selectComponent(e,t){e.preventDefault(),e.stopPropagation(),Ue(this,t),this.filterString="",Ve(this)}changeSort(e,t){e.preventDefault(),this.sort=t,this.page=1,Ve(this)}changePage(e,t){e.preventDefault(),t>0&&(this.page=t),Ve(this)}render(){let t=this;if(!t.isCreateModalVisible)return t.focused=!1,t.filterString="",this.page=1,this.sort="recent",null;t.focused||window.setTimeout(function(){let e=document.getElementById("wv-pb-select-component-input");e&&(e.focus(),t.focused=!0)},10);let n=[0,1,2,3],o=[];for(let e=1;e<t.pageCount+1;e++)o.push(e);return e("div",{class:"modal show d-block",style:{paddingRight:"17px"}},e("div",{class:"modal-dialog modal-full"},e("div",{class:"modal-content"},e("div",{class:"modal-header d-none"},e("h5",{class:"modal-title"},"Select component"),e("button",{type:"button",class:"close",onClick:e=>t.cancelNodeCreateHandler(e)},e("span",{"aria-hidden":"true"},"Ã—"))),e("div",{class:"modal-body"},e("nav",{class:"navbar navbar-expand-lg navbar-light mb-3 go-bkg-blue-gray-light"},e("div",{class:"flex-grow-1"},e("ul",{class:"nav nav-pills"},e("li",{class:"nav-item"},e("a",{class:"nav-link "+("recent"===t.sort?"active":""),href:"#",onClick:e=>t.changeSort(e,"recent")},"Recent")),e("li",{class:"nav-item"},e("a",{class:"nav-link "+("usage"===t.sort?"active":""),href:"#",onClick:e=>t.changeSort(e,"usage")},"Most Used")),e("li",{class:"nav-item"},e("a",{class:"nav-link "+("alpha"===t.sort?"active":""),href:"#",onClick:e=>t.changeSort(e,"alpha")},"Alphabetical")))),e("div",{class:"form-inline"},e("input",{class:"form-control form-control-sm",placeholder:"component name",onInput:e=>t.filterChangeHandler(e),id:"wv-pb-select-component-input"}))),t.componentList.map(function(o,a){return o=o,e("div",{class:"row"},n.map(function(n){let o=a+n;if(o<t.componentList.length&&a%4==0){let n=t.componentList[o],a="ti-file";return n.icon_class&&(a=n.icon_class),e("div",{class:"col-6 col-lg-3",key:n.name},e("div",{class:"shadow-sm mb-4 card icon-card clickable",onClick:e=>t.selectComponent(e,n)},e("div",{class:"card-body p-1"},e("div",{class:"icon-card-body"},e("i",{class:"icon "+a}),e("div",{class:"meta"},e("div",{class:"title"},n.label),e("div",{class:"description"},n.description),e("div",{class:"library"},n.library))))))}}))}),e("nav",{"aria-label":"Page navigation example"},e("ul",{class:"pagination justify-content-center"},e("li",{class:"page-item "+(t.page>1?"":"disabled")},e("a",{class:"page-link",href:"#",onClick:e=>t.changePage(e,t.page-1)},"Previous")),o.map(function(n){return e("li",{class:"page-item "+(t.page===n?"active":"")},e("a",{class:"page-link",href:"#",onClick:e=>t.changePage(e,n)},n))}),e("li",{class:"page-item "+(t.page>=t.pageCount?"disabled":"")},e("a",{class:"page-link",href:"#",onClick:e=>t.changePage(e,t.page+1)},"Next"))))),e("div",{class:"modal-footer"},e("button",{type:"button",class:"btn btn-white btn-sm",onClick:e=>t.cancelNodeCreateHandler(e)},"Cancel")))))}static get is(){return"wv-create-modal"}static get properties(){return{componentList:{state:!0},filterString:{state:!0},isCreateModalVisible:{state:!0},page:{state:!0},pageCount:{state:!0},pageSize:{state:!0},sort:{state:!0},store:{context:"store"},total:{state:!0}}}}class We{constructor(){this.isHelpModalVisible=!1}componentWillLoad(){this.store.mapStateToProps(this,e=>({isHelpModalVisible:e.isHelpModalVisible})),this.store.mapDispatchToProps(this,{setHelpModalState:r})}cancelHelpModalHandler(e){e.preventDefault(),e.stopPropagation(),this.setHelpModalState(!1)}render(){let t=this;return t.isHelpModalVisible?e("div",{class:"modal show d-block",style:{paddingRight:"17px"},id:"modal-component-help"},e("div",{class:"modal-dialog modal-xl"},e("div",{class:"modal-content"},e("div",{class:"modal-header"},e("span",{class:"title"},"Component help"),e("span",{class:"aside"},"wv-",t.store.getState().activeNodeId)),e("div",{class:"modal-body",id:"modal-component-help-body"},e("wv-show-help",{nodeId:t.store.getState().activeNodeId})),e("div",{class:"modal-footer"},e("button",{type:"button",class:"btn btn-white btn-sm",onClick:e=>t.cancelHelpModalHandler(e)},"Close"))))):null}static get is(){return"wv-help-modal"}static get properties(){return{isHelpModalVisible:{state:!0},store:{context:"store"}}}}class qe{render(){return e("div",{class:"p-2"},e("i",{class:"fa fa-spin fa-spinner go-blue"})," Loading...")}static get is(){return"wv-loading-pane"}}function Ge(){var e=document.createEvent("Event");e.initEvent("DOMContentLoaded",!0,!0),document.dispatchEvent(e)}var Xe=["application/javascript","application/ecmascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript"];function Je(e){var t,n=e.querySelectorAll("script"),o=[];[].forEach.call(n,function(e){(t=e.getAttribute("type"))&&-1===Xe.indexOf(t)||o.push(function(t){!function(e,t){var n=document.createElement("script");n.type="text/javascript",e.src?(n.onload=t,n.onerror=t,n.src=e.src):n.textContent=e.innerText,n.src.includes("http://localhost:3333/")&&(n.src=n.src.replace("http://localhost:3333/","http://localhost:2202/")),document.head.appendChild(n),e.parentNode.removeChild(e),e.src||t()}(e,t)})}),function e(t,n,o){void 0===o&&(o=0),t[o]&&t[o](function(){++o===t.length?n():e(t,n,o)})}(o,Ge,0)}class Ye{static MoveNodeToStack(e){if(!e)return console.error("node id not defined MoveNodeToStack "+e),!1;let t=document.getElementById("node-design-"+e),n=document.getElementById("wv-node-design-stack");return t&&t.parentElement.id==="wv-node-"+e&&n?(window.setTimeout(function(){n.appendChild(t)},5),!0):!(!t||"wv-node-design-stack"!==t.parentElement.id||!n)||(n?console.error("error to-stack "+e):console.error("stack is missing "),!1)}static GetNodeFromStack(e){if(!e)return console.error("node id not defined GetNodeFromStack "+e),!1;let t=document.getElementById("node-design-"+e),n=document.getElementById("wv-node-"+e);return t&&"wv-node-design-stack"===t.parentElement.id&&n?(window.setTimeout(function(){n.appendChild(t)},5),!0):t&&t.parentElement.id==="wv-node-"+e?(console.log("no need from stack "+e),!0):!n}static GetNodeFromServerToStack(e,t,n){!function(e,t,n){"object"!=typeof e.options&&(e.options=e.options?JSON.parse(e.options):{});let o=n.store.getState().siteRootUrl+t.meta.design_view_url+"&nid="+e.id+"&pid="+e.page_id,r=n.store.getState().recordId;r&&(o+="&recId="+r),Be.post(o,e.options,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(o){let r=document.getElementById("node-design-"+e.id),i=new Array;var s=r.querySelectorAll("[data-node-id]");a.forEach(s,function(e){i.push(e.getAttribute("data-node-id"))}),a.forEach(i,function(e){Ye.MoveNodeToStack(e)}),r.remove();let d=document.createElement("div");d.id="node-design-"+e.id,d.classList.add("wv-pb-node"),d.innerHTML=o.data,document.getElementById("wv-node-design-stack").appendChild(d),Je(d),n.updateNodeOptions(e),window.setTimeout(function(){i.push(e.id),n.addReloadNodeIds(i);var o=new Event("WvPbManager_Design_Loaded"),a=new De;a.node=e,a.component_name=t.node.component_name,o.payload=a,document.dispatchEvent(o)},10)}).catch(function(e){e.response?e.response.data?console.log(e.response.data):console.log(e.response.statusText):e.message?console.log(e.message):console.log(e)})}(e,t,n)}static GetNodeAndMeta(e,t){let n={node:null,meta:null},o=e.store.getState().pageNodes,r=e.store.getState().library;if(t){let e=a.findIndex(o,function(e){return e.id==t});if(-1==e)return void console.error("Node with id "+t+" not found in pageNodes");{n.node=Object.assign({},o[e]);let t=a.findIndex(r,function(e){return e.name==n.node.component_name});if(-1==t)return void console.error("Component name "+n.node.component_name+" not found in library");n.meta=r[t]}}return n}static GetActiveNodeAndMeta(e){let t={node:null,meta:null},n=e.store.getState().pageNodes,o=e.store.getState().library,r=e.store.getState().activeNodeId;if(r){let e=a.findIndex(n,function(e){return e.id==r});if(-1==e)return void console.error("Node with id "+r+" not found in pageNodes");{t.node=Object.assign({},n[e]);let r=a.findIndex(o,function(e){return e.name==t.node.component_name});if(-1==r)return void console.error("Component name "+t.node.component_name+" not found in library");t.meta=o[r]}}return t}static GetChildNodes(e=null,t=null,n=new Array,o=new Array,r=!0){let i=a.filter(n,function(n){return n.parent_id===e&&(!r||n.container_id===t)});a.forEach(i,function(e){o.push(e.id),Ye.GetChildNodes(e.id,"",n,o,!1)})}}class ze{constructor(){this.isOptionsModalVisible=!1,this.isSaveLoading=!1}componentWillLoad(){this.store.mapStateToProps(this,e=>({isOptionsModalVisible:e.isOptionsModalVisible})),this.store.mapDispatchToProps(this,{setOptionsModalState:i,updateNodeOptions:s,addReloadNodeIds:o})}cancelOptionsModalHandler(e){e.preventDefault(),e.stopPropagation(),this.setOptionsModalState(!1)}saveOptionsModalHandler(e){let t=this;t.isSaveLoading=!0,e.preventDefault();let n={},o=document.querySelectorAll("#modal-component-options .modal-body input, #modal-component-options .modal-body textarea, #modal-component-options .modal-body select");o&&o.length>0&&a.forEach(o,function(e){let t=e.name;if(e.type&&"text"!==e.type&&"number"!==e.type&&"email"!==e.type&&"color"!==e.type&&"textarea"!==e.type&&"hidden"!==e.type)if("checkbox"===e.type){let o=!1;if(e.classList.contains("form-check-input")&&(o=!0),!t&&!o)return!0;let a=!1;if(o){a=document.querySelector('#modal-component-options .modal-body input[data-source-id="'+e.id+'"]').value;let t=e.getAttribute("data-field-name");n[t]=a}else e.checked&&(a=!0),n[t]=a}else"select"===e.tagName.toLowerCase()&&(n[t]=e.multiple?function(t){for(var n,o=[],a=e&&e.options,r=0,i=a.length;r<i;r++)(n=a[r]).selected&&o.push(n.value||n.text);return o}():e.value);else{if(!t)return!0;switch(e.type){case"number":var o=Number(e.value);isNaN(o)&&(o=null),n[t]=o;break;default:n[t]=e.value}}});let r=Ye.GetActiveNodeAndMeta(t),i=t.store.getState().siteRootUrl+"/api/v3.0/page/"+r.node.page_id+"/node/"+r.node.id+"/options/update",s=t.store.getState().recordId;s&&(i+="?recId="+s),Be.post(i,n,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(n){var o=new Event("WvPbManager_Options_Changed"),i=new De;i.original_event=e,i.node=r.node,i.component_name=r.node.component_name,o.payload=i,document.dispatchEvent(o);var s=a.findIndex(n.data,function(e){return e.id===r.node.id});s>-1?Ye.GetNodeFromServerToStack(n.data[s],r,t):alert("Error: Node not found in returned results"),t.isSaveLoading=!1,t.setOptionsModalState(!1)}).catch(function(e){t.isSaveLoading=!1,e.response?e.response.data?alert(e.response.data):alert(e.response.statusText):e.message?alert(e.message):alert(e)})}render(){let t=this,n=t.isOptionsModalVisible,o=t.store.getState().activeNodeId;if(!n)return null;var a=Ye.GetNodeAndMeta(t,o).node.component_name.split(".");return e("div",{class:"modal show d-block",style:{paddingRight:"17px"},id:"modal-component-options"},e("div",{class:"modal-dialog modal-xl"},e("div",{class:"modal-content"},e("div",{class:"modal-header"},e("span",{class:"title"},e("span",{class:"go-teal"},a[a.length-1])," options"),e("span",{class:"aside"},"wv-",o)),e("div",{class:"modal-body",id:"modal-component-options-body"},e("wv-show-options",{nodeId:o})),e("div",{class:"modal-footer"},e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:e=>t.saveOptionsModalHandler(e),disabled:t.isSaveLoading},e("i",{class:t.isSaveLoading?"fa fa-spin fa-spinner":"fa fa-save"})," Save Options"),e("button",{type:"button",class:"btn btn-white btn-sm",onClick:e=>t.cancelOptionsModalHandler(e)},"Close")))))}static get is(){return"wv-options-modal"}static get properties(){return{isOptionsModalVisible:{state:!0},isSaveLoading:{state:!0},store:{context:"store"}}}}function Ke(t){let n=t.scope;if(!n.activeNodeId)return e("div",null,"Select a component to review its options");let o=n.store.getState().pageNodes,r=a.findIndex(o,function(e){return e.id===n.activeNodeId});if(-1===r)return null;let i=o[r],s=n.store.getState().library,d=a.findIndex(s,function(e){return e.name===i.component_name});if(-1===d)return null;let l=s[d],c={};return l.color&&(c={color:l.color}),[e("div",{class:"icon-card-body"},e("span",{class:"icon "+l.icon_class,style:c}),e("div",{class:"meta"},e("div",{class:"title"},l.label),e("div",{class:"description"},l.description),e("div",{class:"library"},l.library))),e("hr",{class:"divider",style:{margin:"5px 0"}}),e("div",{class:"row no-gutters"},e("div",{class:"col-6 pr-1"},e("button",{id:"wv-pb-inspector-options-btn",type:"button",class:"btn btn-white btn-sm btn-block",onClick:e=>n.showOptionsModalHandler(e)},e("i",{class:n.isOptionsLoading?"fa fa-spin fa-spinner":"fa fa-cog"})," options")),e("div",{class:"col-6 pl-1"},e("button",{type:"button",class:"btn btn-white btn-sm btn-block",onClick:e=>n.showHelpModalHandler(e)},e("i",{class:n.isHelpLoading?"fa fa-spin fa-spinner":"far fa-question-circle"})," help")))]}function $e(t){let n=t.scope;if(n.activeNodeId)return e("a",{class:"go-red",href:"#",onClick:e=>{window.confirm("Are you sure you wish to delete this component?")&&n.deleteNodeHandler(e)}},e("i",{class:"ti-trash"})," delete node")}function Qe(e){let t=Ye.GetActiveNodeAndMeta(e),n=e.store.getState().siteRootUrl+"/api/v3.0/page/"+t.node.page_id+"/node/"+t.node.id+"/delete",o=e.store.getState().recordId;o&&(n+="?recId="+o),Be.post(n,null,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(){var n=new Event("WvPbManager_Node_Removed"),o=new De;o.original_event=event,o.node=t.node,o.component_name=t.node.component_name,n.payload=o,document.dispatchEvent(n),e.removeNode(e.activeNodeId)}).catch(function(e){e.response?e.response.data?alert(e.response.data):alert(e.response.statusText):e.message?alert(e.message):alert(e)})}class Ze{constructor(){this.isHelpLoading=!1,this.isOptionsLoading=!1}componentWillLoad(){this.store.mapStateToProps(this,e=>({activeNodeId:e.activeNodeId})),this.store.mapDispatchToProps(this,{removeNode:d,setOptionsModalState:i,setHelpModalState:r})}deleteNodeHandler(e){e.preventDefault(),e.stopPropagation(),Qe(this)}showOptionsModalHandler(e){e.preventDefault(),e.stopPropagation(),document.getElementById("node-options-"+this.activeNodeId)?this.setOptionsModalState(!0):function(e){e.isOptionsLoading=!0;let t=Ye.GetNodeAndMeta(e,e.activeNodeId),n=null;if(t){let o={headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}},a=e.store.getState().siteRootUrl+t.meta.options_view_url+"&nid="+t.node.id+"&pid="+t.node.page_id,r=e.store.getState().recordId;r&&(a+="&recId="+r),Be.post(a,t.node.options,o).then(function(n){let o=document.getElementById("wv-node-options-stack"),a=document.createElement("div");a.id="node-options-"+e.activeNodeId,a.innerHTML=n.data,o.appendChild(a),Je(a);var r=new Event("WvPbManager_Options_Loaded"),i=new De;i.node=t.node,i.component_name=t.node.component_name,r.payload=i,document.dispatchEvent(r),e.setOptionsModalState(!0),e.isOptionsLoading=!1}).catch(function(t){if(n=t.response?t.response.data?t.response.data:t.response.statusText:t.message?t.message:t){let t=document.getElementById("wv-node-"+e.activeNodeId),o=document.createElement("div");o.classList.add("alert"),o.classList.add("alert-danger"),o.classList.add("m-1"),o.classList.add("p-1"),o.innerHTML=n,t.appendChild(o),e.isOptionsLoading=!1}})}}(this)}showHelpModalHandler(e){e.preventDefault(),e.stopPropagation(),document.getElementById("node-help-"+this.activeNodeId)?this.setHelpModalState(!0):function(e){e.isHelpLoading=!0;let t=Ye.GetNodeAndMeta(e,e.activeNodeId),n=null;if(t){let o={headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}},a=e.store.getState().siteRootUrl+t.meta.help_view_url+"&nid="+t.node.id+"&pid="+t.node.page_id,r=e.store.getState().recordId;r&&(a+="&recId="+r),Be.post(a,t.node.options,o).then(function(n){let o=document.getElementById("wv-node-help-stack"),a=document.createElement("div");a.id="node-help-"+e.activeNodeId,a.innerHTML=n.data,o.appendChild(a),Je(a);var r=new Event("WvPbManager_Help_Loaded"),i=new De;i.node=t.node,i.component_name=t.node.component_name,r.payload=i,document.dispatchEvent(r),e.setHelpModalState(!0),e.isHelpLoading=!1}).catch(function(t){if(n=t.response?t.response.data?t.response.data:t.response.statusText:t.message?t.message:t){let t=document.getElementById("wv-node-"+e.activeNodeId),o=document.createElement("div");o.classList.add("alert"),o.classList.add("alert-danger"),o.classList.add("m-1"),o.classList.add("p-1"),o.innerHTML=n,t.appendChild(o),e.isOptionsLoading=!1}})}}(this)}render(){return[e("div",{class:"header"},e("div",{class:"title"},"Inspector"),e("div",{class:"action pr-1"},e($e,{scope:this}))),e("div",{class:"body"},e(Ke,{scope:this}))]}static get is(){return"wv-pb-inspector"}static get properties(){return{activeNodeId:{state:!0},isHelpLoading:{state:!0},isOptionsLoading:{state:!0},store:{context:"store"}}}}var et=function(e){var t,n=("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==D?D:"undefined"!=typeof module?module:Function("return this")()).Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}(),tt=function(){return Math.random().toString(36).substring(7).split("").join(".")},nt={INIT:"@@redux/INIT"+tt(),REPLACE:"@@redux/REPLACE"+tt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+tt()}};function ot(e,t,n){var o;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(ot)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var a=e,r=t,i=[],s=i,d=!1;function l(){s===i&&(s=i.slice())}function c(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return r}function u(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return l(),s.push(e),function(){if(t){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,l();var n=s.indexOf(e);s.splice(n,1)}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,r=a(r,e)}finally{d=!1}for(var t=i=s,n=0;n<t.length;n++)(0,t[n])();return e}return p({type:nt.INIT}),(o={dispatch:p,subscribe:u,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");a=e,p({type:nt.REPLACE})}})[et]=function(){var e,t=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[et]=function(){return this},e},o}const at={},rt=(e=at,t)=>{let n=Object.assign({},e);switch(t.type){case l:return n.drake=t.payload,n;case c:{let e=document.getElementById(t.payload);n.drake.containers.push(e)}return n;case u:return n.activeNodeId=n.activeNodeId&&n.activeNodeId===t.payload?null:t.payload,n;case p:return n.hoveredNodeId=t.payload,t.payload&&(n.hoveredContainerId=null),n;case f:return n.hoveredContainerId=t.payload,t.payload&&(n.hoveredNodeId=null),n;case h:if(t.payload){document.body.className+=" modal-open",document.body.style.paddingRight="17px";let e=document.createElement("div");e.className="modal-backdrop show",e.id="wv-pb-backdrop",document.body.appendChild(e),n.isCreateModalVisible=!0,n.createdNode=t.payload}else document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null,(o=document.getElementById("wv-pb-backdrop"))&&o.parentNode.removeChild(o),n.isCreateModalVisible=!1,n.createdNode=null;return n;case m:{n.activeNodeId=t.payload.id;let e=t.payload;"object"!=typeof e.options&&(e.options=e.options?JSON.parse(e.options):{}),n.pageNodes=[...n.pageNodes,e],n.pageNodeChangeIndex++,document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null,(o=document.getElementById("wv-pb-backdrop"))&&o.parentNode.removeChild(o),n.isCreateModalVisible=!1,n.createdNode=null}return n;case v:return n.pageNodes=a.filter(n.pageNodes,function(e){return e.id.toLowerCase()!==t.payload.toLowerCase()}),n.activeNodeId=null,n.pageNodeChangeIndex++,n;case g:{let e=t.payload;if(e){"object"!=typeof e.options&&(e.options=e.options?JSON.parse(e.options):{});let t=a.findIndex(n.pageNodes,function(t){return t.id===e.id});if(t>-1){let o=n.pageNodes[t];o.options=e.options,n.pageNodes=a.filter(n.pageNodes,function(t){return t.id!==e.id}),n.pageNodes.push(o),n.pageNodeChangeIndex++}}}return n;case y:return a.forEach(t.payload,function(e){"object"!=typeof e.options&&(e.options=e.options?JSON.parse(e.options):{}),n.pageNodes=t.payload,n.pageNodeChangeIndex++}),n;case b:if(t.payload){document.body.className+=" modal-open",document.body.style.paddingRight="17px";let e=document.createElement("div");e.className="modal-backdrop show",e.id="wv-pb-backdrop",document.body.appendChild(e),n.isOptionsModalVisible=!0}else document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null,(o=document.getElementById("wv-pb-backdrop"))&&o.parentNode.removeChild(o),n.isOptionsModalVisible=!1;return n;case w:if(t.payload){document.body.className+=" modal-open",document.body.style.paddingRight="17px";let e=document.createElement("div");e.className="modal-backdrop show",e.id="wv-pb-backdrop",document.body.appendChild(e),n.isHelpModalVisible=!0}else{var o;document.body.className=document.body.className.replace(" modal-open","").replace("modal-open",""),document.body.style.paddingRight=null,(o=document.getElementById("wv-pb-backdrop"))&&o.parentNode.removeChild(o),n.isHelpModalVisible=!1}return n;case N:return t.payload&&(n.reloadNodeIdList=a.concat(n.reloadNodeIdList,t.payload)),n;case I:return t.payload&&(n.reloadNodeIdList=a.without(n.reloadNodeIdList,t.payload)),n;default:return e}},it=e=>ot(rt,e);class st{constructor(){this.library=new Array,this.pageNodes=new Array,this.pageId=null,this.siteRootUrl=null,this.drake=new Object,this.activeNodeId=null,this.hoveredNodeId=null,this.hoveredContainerId=null,this.pageNodeChangeIndex=1,this.isCreateModalVisible=!1,this.createdNode=new Object,this.isOptionsModalVisible=!1,this.isHelpModalVisible=!1,this.reloadNodeIdList=new Array,this.componentMeta=new Object,this.recordId=null}}var dt=function(e,t){return Array.prototype.slice.call(e,t)},lt="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},ct=C.CustomEvent,ut=function(){try{var e=new ct("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?ct:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},pt=[],ft="",ht=/^on/;for(ft in C)ht.test(ft)&&pt.push(ft.slice(2));var mt=pt,vt=C.document,gt=function(e,t,n,o){return e.addEventListener(t,n,o)},yt=function(e,t,n,o){return e.removeEventListener(t,n,o)},bt=[];C.addEventListener||(gt=function(e,t,n){return e.attachEvent("on"+t,function(e,t,n){var o=Nt(e,t,n)||function(e,t,n){return function(t){var o=t||C.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,n.call(e,o)}}(e,0,n);return bt.push({wrapper:o,element:e,type:t,fn:n}),o}(e,t,n))},yt=function(e,t,n){var o=Nt(e,t,n);if(o)return e.detachEvent("on"+t,o)});var wt={add:gt,remove:yt,fabricate:function(e,t,n){var o=-1===mt.indexOf(t)?new ut(t,{detail:n}):function(){var e;return vt.createEvent?(e=vt.createEvent("Event")).initEvent(t,!0,!0):vt.createEventObject&&(e=vt.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(o):e.fireEvent("on"+t,o)}};function Nt(e,t,n){var o=function(e,t,n){var o,a;for(o=0;o<bt.length;o++)if((a=bt[o]).element===e&&a.type===t&&a.fn===n)return o}(e,t,n);if(o){var a=bt[o].wrapper;return bt.splice(o,1),a}}var It={},Ct="(?:^|\\s)",St="(?:\\s|$)";function Et(e){var t=It[e];return t?t.lastIndex=0:It[e]=t=new RegExp(Ct+e+St,"g"),t}var xt={add:function(e,t){var n=e.className;n.length?Et(t).test(n)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(Et(t)," ").trim()}},Tt=document,Lt=Tt.documentElement;function Mt(e,t,n,o){C.navigator.pointerEnabled?wt[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],o):C.navigator.msPointerEnabled?wt[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],o):(wt[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],o),wt[t](e,n,o))}function kt(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function At(e,t){return void 0!==C[t]?C[t]:Lt.clientHeight?Lt[e]:Tt.body[e]}function _t(e,t,n){var o,a=e||{},r=a.className;return a.className+=" gu-hide",o=Tt.elementFromPoint(t,n),a.className=r,o}function Ot(){return!1}function Pt(){return!0}function Rt(e){return e.width||e.right-e.left}function Ht(e){return e.height||e.bottom-e.top}function jt(e){return e.parentNode===Tt?null:e.parentNode}function Bt(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||e(jt(t))))}(e)}function Dt(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function Ut(e,t){var n=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),o={pageX:"clientX",pageY:"clientY"};return e in o&&!(e in n)&&o[e]in n&&(e=o[e]),n[e]}var Vt=function(e,t){var n,o,a,r,i,s,d,l,c,u,p;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var f,h=null,m=t||{};void 0===m.moves&&(m.moves=Pt),void 0===m.accepts&&(m.accepts=Pt),void 0===m.invalid&&(m.invalid=function(){return!1}),void 0===m.containers&&(m.containers=e||[]),void 0===m.isContainer&&(m.isContainer=Ot),void 0===m.copy&&(m.copy=!1),void 0===m.copySortSource&&(m.copySortSource=!1),void 0===m.revertOnSpill&&(m.revertOnSpill=!1),void 0===m.removeOnSpill&&(m.removeOnSpill=!1),void 0===m.direction&&(m.direction="vertical"),void 0===m.ignoreInputTextSelection&&(m.ignoreInputTextSelection=!0),void 0===m.mirrorContainer&&(m.mirrorContainer=Tt.body),void 0===m.slideFactorY&&(m.slideFactorY=5),void 0===m.slideFactorX&&(m.slideFactorX=5);var v=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var a=arguments.length;if(1===a)delete o[t];else if(0===a)o={};else{var r=o[t];if(!r)return e;r.splice(r.indexOf(n),1)}return e},e.emit=function(){var t=dt(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(o[t]||[]).slice(0);return function(){var o=dt(arguments),r=this||e;if("error"===t&&!1!==n.throws&&!a.length)throw 1===o.length?o[0]:o;return a.forEach(function(a){n.async?function(e,t,n){e&&lt(function(){e.apply(n||null,t||[])})}(a,o,r):a.apply(r,o),a._once&&e.off(t,a)}),e}},e}({containers:m.containers,start:function(e){var t=S(e);t&&E(t)},end:x,cancel:A,remove:k,destroy:function(){y(!0),L({})},canMove:function(e){return!!S(e)},dragging:!1});return!0===m.removeOnSpill&&v.on("over",function(e){xt.rm(e,"gu-hide")}).on("out",function(e){v.dragging&&xt.add(e,"gu-hide")}),y(),v;function g(e){return-1!==v.containers.indexOf(e)||m.isContainer(e)}function y(e){var t=e?"remove":"add";Mt(Lt,t,"mousedown",I),Mt(Lt,t,"mouseup",L)}function b(e){Mt(Lt,e?"remove":"add","mousemove",C)}function w(e){var t=e?"remove":"add";wt[t](Lt,"selectstart",N),wt[t](Lt,"click",N)}function N(e){f&&e.preventDefault()}function I(e){if(s=e.clientX,d=e.clientY,1===kt(e)&&!e.metaKey&&!e.ctrlKey){var t=e.target,n=S(t);n&&(f=n,b(),"mousedown"===e.type&&(Bt(t)?t.focus():e.preventDefault()))}}function C(e){if(f)if(0!==kt(e)){if(!(void 0!==e.clientX&&Math.abs(e.clientX-s)<=(m.slideFactorX||0)&&void 0!==e.clientY&&Math.abs(e.clientY-d)<=(m.slideFactorY||0))){if(m.ignoreInputTextSelection){var t=Ut("clientX",e),o=Ut("clientY",e);if(Bt(Tt.elementFromPoint(t,o)))return}var l=f;b(!0),w(),x(),E(l);var c,p={left:(c=a.getBoundingClientRect()).left+At("scrollLeft","pageXOffset"),top:c.top+At("scrollTop","pageYOffset")};r=Ut("pageX",e)-p.left,i=Ut("pageY",e)-p.top,xt.add(u||a,"gu-transit"),function(){if(!n){var e=a.getBoundingClientRect();(n=a.cloneNode(!0)).style.width=Rt(e)+"px",n.style.height=Ht(e)+"px",xt.rm(n,"gu-transit"),xt.add(n,"gu-mirror"),m.mirrorContainer.appendChild(n),Mt(Lt,"add","mousemove",R),xt.add(m.mirrorContainer,"gu-unselectable"),v.emit("cloned",n,a,"mirror")}}(),R(e)}}else L({})}function S(e){if(!(v.dragging&&n||g(e))){for(var t=e;jt(e)&&!1===g(jt(e));){if(m.invalid(e,t))return;if(!(e=jt(e)))return}var o=jt(e);if(o&&!m.invalid(e,t)&&m.moves(e,o,t,Dt(e)))return{item:e,source:o}}}function E(e){("boolean"==typeof m.copy?m.copy:m.copy(e.item,e.source))&&(u=e.item.cloneNode(!0),v.emit("cloned",u,e.item,"copy")),o=e.source,a=e.item,l=c=Dt(e.item),v.dragging=!0,v.emit("drag",a,o)}function x(){if(v.dragging){var e=u||a;M(e,jt(e))}}function T(){f=!1,b(!0),w(!0)}function L(e){if(T(),v.dragging){var t=u||a,r=Ut("clientX",e),i=Ut("clientY",e),s=P(_t(n,r,i),r,i);s&&(u&&m.copySortSource||!u||s!==o)?M(t,s):m.removeOnSpill?k():A()}}function M(e,t){var n=jt(e);u&&m.copySortSource&&t===o&&n.removeChild(a),O(t)?v.emit("cancel",e,o,o):v.emit("drop",e,t,o,c),_()}function k(){if(v.dragging){var e=u||a,t=jt(e);t&&t.removeChild(e),v.emit(u?"cancel":"remove",e,t,o),_()}}function A(e){if(v.dragging){var t=arguments.length>0?e:m.revertOnSpill,n=u||a,r=jt(n),i=O(r);!1===i&&t&&(u?r&&r.removeChild(u):o.insertBefore(n,l)),i||t?v.emit("cancel",n,o,o):v.emit("drop",n,r,o,c),_()}}function _(){var e=u||a;T(),n&&(xt.rm(m.mirrorContainer,"gu-unselectable"),Mt(Lt,"remove","mousemove",R),jt(n).removeChild(n),n=null),e&&xt.rm(e,"gu-transit"),p&&clearTimeout(p),v.dragging=!1,h&&v.emit("out",e,h,o),v.emit("dragend",e),o=a=u=l=c=p=h=null}function O(e,t){var r;return r=void 0!==t?t:n?c:Dt(u||a),e===o&&r===l}function P(e,t,n){for(var r=e;r&&!i();)r=jt(r);return r;function i(){if(!1===g(r))return!1;var i=H(r,e),s=j(r,i,t,n);return!!O(r,s)||m.accepts(a,r,o,s)}}function R(e){if(n){e.preventDefault();var t=Ut("clientX",e),s=Ut("clientY",e),d=s-i;n.style.left=t-r+"px",n.style.top=d+"px";var p=u||a,f=_t(n,t,s),g=P(f,t,s),y=null!==g&&g!==h;(y||null===g)&&(h&&I("out"),h=g,y&&I("over"));var b=jt(p);if(g!==o||!u||m.copySortSource){var w,N=H(g,f);if(null!==N)w=j(g,N,t,s);else{if(!0!==m.revertOnSpill||u)return void(u&&b&&b.removeChild(p));w=l,g=o}(null===w&&y||w!==p&&w!==Dt(p))&&(c=w,g.insertBefore(p,w),v.emit("shadow",p,g,o))}else b&&b.removeChild(p)}function I(e){v.emit(e,p,h,o)}}function H(e,t){for(var n=t;n!==e&&jt(n)!==e;)n=jt(n);return n===Lt?null:n}function j(e,t,n,o){var a,r="horizontal"===m.direction;return t!==e?(a=t.getBoundingClientRect(),(r?n>a.left+Rt(a)/2:o>a.top+Ht(a)/2)?Dt(t):t):function(){var t,a,i,s=e.children.length;for(t=0;t<s;t++){if(i=(a=e.children[t]).getBoundingClientRect(),r&&i.left+i.width/2>n)return a;if(!r&&i.top+i.height/2>o)return a}return null}()}};class Ft{constructor(){this.libraryJson="[]",this.pageNodesJson="",this.nodesPendingReload=new Array,this.pageNodes=new Array}componentWillLoad(){let e=JSON.parse(this.libraryJson),t=new Array;this.pageNodesJson&&(t=JSON.parse(this.pageNodesJson)),a.forEach(t,function(e){"object"!=typeof e.options&&(e.options=e.options?JSON.parse(e.options):{})});var n=new st;n.library=e,n.pageNodes=t,n.siteRootUrl=this.siteRootUrl,n.pageId=this.pageId,n.recordId=this.recordId,a.forEach(e,function(e){n.componentMeta[e.name]=e}),this.store.setStore(it(n)),this.store.mapStateToProps(this,e=>({pageNodes:e.pageNodes})),this.store.mapDispatchToProps(this,{setDrake:S,addReloadNodeIds:o,updatePageNodes:E,removeNode:d});let r=this,i=Vt({revertOnSpill:!1,direction:"vertical"});i.on("drop",function(e,t,n){let o=0;a.forEach(e.parentElement.childNodes,function(t){if(t===e)return!1;o++});var i={originContainerId:n.getAttribute("data-container-id"),originParentNodeId:n.getAttribute("data-parent-id"),newContainerId:t.getAttribute("data-container-id"),newParentNodeId:t.getAttribute("data-parent-id"),newIndex:o};let s=e.getAttribute("data-page-id"),d=e.getAttribute("data-node-id");!function(e,t){let n=new Array,o=e.store.getState().pageNodes;Ye.GetChildNodes(t.originParentNodeId,t.originContainerId,o,n),Ye.GetChildNodes(t.newParentNodeId,t.newContainerId,o,n),a.forEach(n,function(e){Ye.MoveNodeToStack(e)}),e.nodesPendingReload=n}(r,i),function(e,t,n,o){let r=e.store.getState().siteRootUrl+"/api/v3.0/page/"+n+"/node/"+o+"/move",i=e.store.getState().recordId;i&&(r+="?recId="+i),Be.post(r,t,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(t){e.updatePageNodes(t.data),window.setTimeout(function(){e.addReloadNodeIds(e.nodesPendingReload),e.nodesPendingReload=new Array,window.setTimeout(function(){a.forEach(e.nodesPendingReload,function(t){let n=Ye.GetNodeAndMeta(e,t);var o=new Event("WvPbManager_Node_Moved"),a=new De;a.original_event=event,a.node=n.node,a.component_name=n.node.component_name,o.payload=a,document.dispatchEvent(o)});{let a=Ye.GetNodeAndMeta(e,o);var t=new Event("WvPbManager_Node_Moved"),n=new De;n.original_event=event,n.node=a.node,n.component_name=a.node.component_name,t.payload=n,document.dispatchEvent(t)}var r=document.querySelectorAll(".wv-container");a.forEach(r,function(e){e.removeAttribute("style")})},10)},10)}).catch(function(e){console.log(e),alert("An error occurred during the move"),location.reload(!0)})}(r,i,s,d)}),i.on("drag",function(){var e=document.querySelectorAll(".wv-container");a.forEach(e,function(e){e.setAttribute("style","width:"+e.offsetWidth+"px")})}),r.setDrake(i)}handleMouseMove(e){!function(e){for(var t=document.querySelectorAll(".wv-pb-content .actions"),n=t.length;n--;){var o=t[n];o.style.left=e.pageX+15+"px",o.style.top=e.pageY+25+"px"}}(e)}componentDidLoad(){let e=this;document.addEventListener("keydown",function(t){switch(t.key){case"Escape":var n=e.store.getState().drake;n.dragging&&n.cancel();break;case"Delete":let o=e.store.getState().activeNodeId,a=e.store.getState().isOptionsModalVisible,r=e.store.getState().isHelpModalVisible,i=e.store.getState().isCreateModalVisible;!o||a||r||i||window.confirm("Are you sure you wish to delete the selected component?")&&function(e){let t=Ye.GetActiveNodeAndMeta(e),n=e.store.getState().siteRootUrl+"/api/v3.0/page/"+t.node.page_id+"/node/"+t.node.id+"/delete",o=e.store.getState().recordId;o&&(n+="?recId="+o),Be.post(n,null,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(function(){var n=new Event("WvPbManager_Node_Removed"),o=new De;o.original_event=event,o.node=t.node,o.component_name=t.node.component_name,n.payload=o,document.dispatchEvent(n),e.removeNode(e.store.getState().activeNodeId)}).catch(function(e){e.response?alert(e.response.statusText+":"+e.response.data):e.message?alert(e.message):alert(e)})}(e)}},!1)}render(){let t=this,n=[],o=this.store.getState().library;return e("div",{id:"wv-page-manager-wrapper"},e("div",{class:"row no-gutters"},e("div",{class:"col",style:{"overflow-x":"auto"}},e("div",{class:"wv-pb-content"},e("div",{class:"wb-pb-content-inner"},e("wv-pb-node-container",{"parent-node-id":null,containerId:""})))),e("div",{class:"col-auto",style:{width:"400px"}},e("wv-pb-inspector",null),e("wv-pb-tree",null))),this.pageNodes.map(function(r){let i=r.component_name;if(-1===a.findIndex(n,function(e){return e===i})){let s=a.findIndex(o,function(e){return e.name==i});if(s>-1)return o[s].service_js_url?(n.push(i),e("script",{key:r.id,src:t.siteRootUrl+o[s].service_js_url})):(console.info("Service not found for "+i),null)}return null}),e("div",{id:"wv-node-design-stack",class:"d-none"}),e("div",{id:"wv-node-options-stack",class:"d-none"}),e("div",{id:"wv-node-help-stack",class:"d-none"}),e("wv-create-modal",null),e("wv-help-modal",null),e("wv-options-modal",null))}static get is(){return"wv-pb-manager"}static get properties(){return{libraryJson:{type:String,attr:"library-json"},nodesPendingReload:{state:!0},pageId:{type:String,attr:"page-id"},pageNodes:{state:!0},pageNodesJson:{type:String,attr:"page-nodes-json"},recordId:{type:String,attr:"record-id"},siteRootUrl:{type:String,attr:"site-root-url"},store:{context:"store"}}}static get listeners(){return[{name:"mousemove",method:"handleMouseMove",passive:!0}]}}class Wt{constructor(){this.isLoading=!1}componentWillLoad(){this.nodeId&&(this.store.mapStateToProps(this,e=>({reloadNodeIdList:e.reloadNodeIdList})),this.store.mapDispatchToProps(this,{removeReloadNodeIds:x}))}nodeIndexUpdateHandler(e){let t=this;a.findIndex(e,function(e){return e===t.nodeId})>-1&&!t.el.parentElement.classList.contains("gu-mirror")&&(Ye.GetNodeFromStack(t.nodeId)||function(e){let t=Ye.GetNodeAndMeta(e,e.nodeId),n=null;if(t){let o={headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}},a=e.store.getState().siteRootUrl+t.meta.design_view_url+"&nid="+t.node.id+"&pid="+t.node.page_id,r=e.store.getState().recordId;r&&(a+="&recId="+r);let i=t.node.options;e.isLoading=!0,Be.post(a,i,o).then(function(n){e.isLoading=!1;let o=document.getElementById("wv-node-"+e.nodeId),a=document.createElement("div");a.id="node-design-"+e.nodeId,a.classList.add("wv-pb-node"),a.innerHTML=n.data,o.appendChild(a),Je(a);var r=new Event("WvPbManager_Design_Loaded"),i=new De;i.node=t.node,i.component_name=t.node.component_name,r.payload=i,document.dispatchEvent(r)}).catch(function(t){if(n=t.response?t.response.data?t.response.data:t.response.statusText:t.message?t.message:t){let t=document.getElementById("wv-node-"+e.nodeId),o=document.createElement("div");o.classList.add("alert"),o.classList.add("alert-danger"),o.classList.add("m-1"),o.classList.add("p-1"),o.innerHTML=n,t.appendChild(o),e.isLoading=!1}})}}(t),t&&"function"==typeof t.removeReloadNodeIds&&t.removeReloadNodeIds(t.nodeId))}render(){return this.el.parentElement.classList.contains("gu-mirror")?null:this.isLoading?e("wv-loading-pane",null):null}static get is(){return"wv-pb-node"}static get properties(){return{el:{elementRef:!0},isLoading:{state:!0},nodeId:{type:String,attr:"node-id"},reloadNodeIdList:{state:!0,watchCallbacks:["nodeIndexUpdateHandler"]},store:{context:"store"}}}}class qt{static newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}function Gt(e,t,n){let o=new Array;return a.forEach(n,function(n){e||n.parent_id?e&&n.parent_id&&e.toLowerCase()===n.parent_id.toLowerCase()&&(t||n.container_id?t&&n.container_id&&t.toLowerCase()===n.container_id.toLowerCase()&&o.push(n):o.push(n)):t||n.container_id?t&&n.container_id&&t.toLowerCase()===n.container_id.toLowerCase()&&o.push(n):o.push(n)}),a.sortBy(o,["weight"])}class Xt{constructor(){this.containerId=null,this.parentNodeId=null}componentWillLoad(){this.store.mapStateToProps(this,e=>({activeNodeId:e.activeNodeId,hoveredNodeId:e.hoveredNodeId,hoveredContainerId:e.hoveredContainerId,pageNodeChangeIndex:e.pageNodeChangeIndex})),this.store.mapDispatchToProps(this,{addDrakeContainerId:T,hoverContainer:L,hoverNode:M,setActiveNode:k,setNodeCreation:t,addReloadNodeIds:o})}componentDidLoad(){this.addDrakeContainerId("wv-container-"+this.parentNodeId+"-"+this.containerId);let e=Gt(this.parentNodeId,this.containerId,this.store.getState().pageNodes),t=new Array;a.forEach(e,function(e){t.push(e.id)}),this.addReloadNodeIds(t)}pageNodeIndexChangeHandler(){let e=this,t="wv-container-"+e.parentNodeId+"-"+e.containerId,n=document.getElementById(t);if(n){let o=e.store.getState().drake;-1==a.findIndex(o.containers,function(e){return e.id===t})&&o.containers.push(n)}}hoverContainerHandler(e){e.preventDefault(),e.stopPropagation(),this.hoverContainer("wv-container-"+this.parentNodeId+"-"+this.containerId)}unhoverContainerHandler(e){e.preventDefault(),e.stopPropagation();let t=e.target.parentNode.closest(".wv-pb-node.hovarable");if(t){let e=t.attributes["data-node-id"];e&&this.hoverNode(e.value)}else this.hoverContainer(null)}nodeClickHandler(e,t){e.preventDefault(),e.stopPropagation(),this.setActiveNode(t)}hoverNodeHandler(e){e.preventDefault(),e.stopPropagation();let t=e.target.getAttribute("data-node-id");this.hoverNode(t)}unhoverNodeHandler(e){e.preventDefault(),e.stopPropagation();let t=e.target.parentNode.closest(".wv-container-inner.hovarable");if(t){let e=t.attributes["data-container-id"];e&&this.hoverContainer(e.value)}else this.hoverNode(null)}addNodeHandler(e){e.preventDefault(),e.stopPropagation();let t=0,n=Gt(this.parentNodeId,this.containerId,this.store.getState().pageNodes);a.forEach(n,function(e){e.weight>t&&(t=e.weight)});let o={id:qt.newGuid(),container_id:this.containerId,parent_id:this.parentNodeId,weight:t+1,page_id:this.store.getState().pageId,component_name:null,node_id:null,options:{},nodes:[]};this.setNodeCreation(o)}render(){let t=this,n=Gt(t.parentNodeId,t.containerId,t.store.getState().pageNodes),o="wv-container-"+t.parentNodeId+"-"+t.containerId,a="";t.containerId||(a+=" first"),t.hoveredContainerId==o&&(a+=" hovered"),0===n.length&&(a+=" empty");let r=t.store.getState().componentMeta;return e("div",{class:"wv-container-inner hovarable "+a,onClick:e=>this.addNodeHandler(e),onMouseEnter:e=>t.hoverContainerHandler(e),onMouseLeave:e=>t.unhoverContainerHandler(e),"data-container-id":o},e("div",{class:"actions"},e("i",{class:"fa fa-plus go-green"})," add in ",t.containerId),e("div",{class:"wv-container",id:o,"data-parent-id":t.parentNodeId,"data-container-id":t.containerId},n.map(function(n){let o="";return t.activeNodeId&&n.id===t.activeNodeId&&(o+=" selected"),t.hoveredNodeId&&n.id===t.hoveredNodeId&&!t.hoveredContainerId&&(o+=" hovered"),r[n.component_name].is_inline&&(o+=" d-inline-block"),e("div",{key:n.id,id:"wv-node-"+n.id,class:"wv-node-wrapper draggable-node hovarable "+o,"data-node-id":n.id,"data-page-id":n.page_id,onClick:e=>t.nodeClickHandler(e,n.id),onMouseEnter:e=>t.hoverNodeHandler(e),onMouseLeave:e=>t.unhoverNodeHandler(e)},e("div",{class:"actions"},e("i",{class:"fa fa-search go-blue"})," select ",r[n.component_name].label),e("wv-pb-node",{nodeId:n.id}))})))}static get is(){return"wv-pb-node-container"}static get properties(){return{activeNodeId:{state:!0},containerId:{type:String,attr:"container-id"},hoveredContainerId:{state:!0},hoveredNodeId:{state:!0},pageNodeChangeIndex:{state:!0,watchCallbacks:["pageNodeIndexChangeHandler"]},parentNodeId:{type:String,attr:"parent-node-id"},store:{context:"store"}}}}class Jt{constructor(){this.nodeId="",this.isHelpModalVisible=!1}componentWillLoad(){this.store.mapStateToProps(this,e=>({isHelpModalVisible:e.isHelpModalVisible}));let e=document.getElementById("node-help-"+this.nodeId),t=document.getElementById("modal-component-help-body");e&&t.appendChild(e)}helpModalVisibilityHandler(e,t){if(!e&&t){let e=document.getElementById("wv-node-help-stack"),t=document.getElementById("node-help-"+this.nodeId);t&&e.appendChild(t)}}render(){return null}static get is(){return"wv-show-help"}static get properties(){return{isHelpModalVisible:{state:!0,watchCallbacks:["helpModalVisibilityHandler"]},nodeId:{type:String,attr:"node-id"},store:{context:"store"}}}}class Yt{constructor(){this.nodeId="",this.isOptionsModalVisible=!1}componentWillLoad(){this.store.mapStateToProps(this,e=>({isOptionsModalVisible:e.isOptionsModalVisible}));let e=document.getElementById("node-options-"+this.nodeId),t=document.getElementById("modal-component-options-body");e&&t.appendChild(e)}optionsModalVisibilityHandler(e,t){if(!e&&t){let e=document.getElementById("wv-node-options-stack"),t=document.getElementById("node-options-"+this.nodeId);t&&e.appendChild(t)}}render(){return null}static get is(){return"wv-show-options"}static get properties(){return{isOptionsModalVisible:{state:!0,watchCallbacks:["optionsModalVisibilityHandler"]},nodeId:{type:String,attr:"node-id"},store:{context:"store"}}}}export{Fe as WvCreateModal,We as WvHelpModal,qe as WvLoadingPane,ze as WvOptionsModal,Ze as WvPbInspector,Ft as WvPbManager,Wt as WvPbNode,Xt as WvPbNodeContainer,Jt as WvShowHelp,Yt as WvShowOptions};